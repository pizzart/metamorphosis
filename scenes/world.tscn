[gd_scene load_steps=24 format=3 uid="uid://64kdpv3e4j6m"]

[ext_resource type="Script" path="res://scripts/world.gd" id="1_eoi30"]
[ext_resource type="PackedScene" uid="uid://dph8pd3qblx44" path="res://scenes/player.tscn" id="1_wk3e0"]
[ext_resource type="Shader" path="res://misc/matrix.gdshader" id="2_1rf8u"]
[ext_resource type="TileSet" uid="uid://uvyca8uwcqd5" path="res://misc/map.tres" id="3_mb8tr"]
[ext_resource type="Texture2D" uid="uid://bl8yj5xlmibox" path="res://sprites/bgs/1/cloud_fill.png" id="6_3tv2d"]
[ext_resource type="Texture2D" uid="uid://b5g8dpf40np5l" path="res://sprites/bgs/1/bg1_0.png" id="7_jgl2r"]
[ext_resource type="Texture2D" uid="uid://dae4vt3bhwj3k" path="res://sprites/bgs/3/bg3_0.png" id="8_fhbtx"]
[ext_resource type="Texture2D" uid="uid://c007ojalq1r0f" path="res://sprites/bgs/1/clouds4.png" id="8_k0vh2"]
[ext_resource type="Texture2D" uid="uid://bmnojti0rqdun" path="res://sprites/bgs/1/clouds1.png" id="8_npq8y"]
[ext_resource type="Texture2D" uid="uid://d1a4fx7n68irf" path="res://sprites/bgs/1/buildings.png" id="8_nwf71"]
[ext_resource type="Texture2D" uid="uid://6w8djd6ti2ea" path="res://sprites/bgs/3/bg3_1.png" id="9_ktfkt"]
[ext_resource type="Texture2D" uid="uid://bgogdrqjly2tk" path="res://sprites/bgs/1/clouds2.png" id="9_nbadq"]
[ext_resource type="Texture2D" uid="uid://645mlkk68ti8" path="res://sprites/bgs/1/clouds3.png" id="10_eb2fp"]
[ext_resource type="Texture2D" uid="uid://c2vbm3ognyrw4" path="res://sprites/bgs/3/bg3_2.png" id="10_gyw7h"]
[ext_resource type="Texture2D" uid="uid://bwnvd63cs8345" path="res://sprites/bgs/2/bg2_0.png" id="11_6w7jm"]
[ext_resource type="AudioStream" uid="uid://bvq8brjhyvtgh" path="res://audio/mus/boss3.ogg" id="16_u4s3l"]
[ext_resource type="AudioStream" uid="uid://chby56s7kkdnf" path="res://audio/mus/mystique_calm.ogg" id="17_4b642"]
[ext_resource type="AudioStream" uid="uid://dxjxmgo3vvmu0" path="res://audio/mus/mystique_intense.ogg" id="18_jg8vn"]
[ext_resource type="AudioStream" uid="uid://ciduq3e1emkqf" path="res://audio/mus/city_calm.ogg" id="19_vdfrj"]
[ext_resource type="AudioStream" uid="uid://dry5bp5aqvye" path="res://audio/mus/city_intense.ogg" id="20_0pcfj"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_k3f30"]
noise_type = 5
seed = 2
frequency = 0.2543
fractal_type = 0

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_joxvr"]
width = 32
height = 32
generate_mipmaps = false
noise = SubResource("FastNoiseLite_k3f30")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_5m35t"]
shader = ExtResource("2_1rf8u")
shader_parameter/noise_tex = SubResource("NoiseTexture2D_joxvr")

[node name="World" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_eoi30")

[node name="Player" parent="." instance=ExtResource("1_wk3e0")]

[node name="TileMap" type="TileMap" parent="."]
clip_children = 2
visibility_layer = 4
z_index = -1
y_sort_enabled = true
tile_set = ExtResource("3_mb8tr")
cell_quadrant_size = 24
format = 2
layer_0/name = "Ground"
layer_0/z_index = -3
layer_1/name = "Walls"
layer_1/enabled = true
layer_1/modulate = Color(1, 1, 1, 1)
layer_1/y_sort_enabled = true
layer_1/y_sort_origin = 0
layer_1/z_index = -1
layer_1/tile_data = PackedInt32Array()
layer_2/name = ""
layer_2/enabled = true
layer_2/modulate = Color(1, 1, 1, 1)
layer_2/y_sort_enabled = true
layer_2/y_sort_origin = 0
layer_2/z_index = 2
layer_2/tile_data = PackedInt32Array()
layer_3/name = "Underground"
layer_3/enabled = true
layer_3/modulate = Color(1, 1, 1, 1)
layer_3/y_sort_enabled = false
layer_3/y_sort_origin = 0
layer_3/z_index = -4
layer_3/tile_data = PackedInt32Array()

[node name="SkyBG" type="ParallaxBackground" parent="."]

[node name="ParallaxLayer2" type="ParallaxLayer" parent="SkyBG"]
motion_scale = Vector2(0.05, 0)
motion_offset = Vector2(0, 40)
motion_mirroring = Vector2(640, 480)

[node name="Sprite2D" type="Sprite2D" parent="SkyBG/ParallaxLayer2"]
modulate = Color(0.752941, 0.752941, 0.752941, 1)
texture = ExtResource("7_jgl2r")

[node name="ParallaxLayer6" type="ParallaxLayer" parent="SkyBG"]
motion_scale = Vector2(0.05, 0.01)
motion_offset = Vector2(0, 40)
motion_mirroring = Vector2(640, 480)

[node name="Sprite2D" type="Sprite2D" parent="SkyBG/ParallaxLayer6"]
modulate = Color(0.670588, 0.670588, 0.670588, 1)
texture = ExtResource("8_nwf71")

[node name="ParallaxLayer5" type="ParallaxLayer" parent="SkyBG"]
motion_scale = Vector2(0.05, 0.05)
motion_offset = Vector2(50, 200)
motion_mirroring = Vector2(576, 576)

[node name="Sprite2D" type="Sprite2D" parent="SkyBG/ParallaxLayer5"]
texture = ExtResource("8_k0vh2")

[node name="ParallaxLayer" type="ParallaxLayer" parent="SkyBG"]
motion_scale = Vector2(0.05, 0.05)
motion_offset = Vector2(0, 50)
motion_mirroring = Vector2(448, 368)

[node name="Sprite2D" type="Sprite2D" parent="SkyBG/ParallaxLayer"]
texture = ExtResource("8_npq8y")

[node name="ParallaxLayer3" type="ParallaxLayer" parent="SkyBG"]
motion_scale = Vector2(0.07, 0.07)
motion_offset = Vector2(0, 120)
motion_mirroring = Vector2(448, 368)

[node name="Sprite2D" type="Sprite2D" parent="SkyBG/ParallaxLayer3"]
texture = ExtResource("9_nbadq")

[node name="ParallaxLayer4" type="ParallaxLayer" parent="SkyBG"]
motion_scale = Vector2(0.02, 0.02)
motion_offset = Vector2(-50, 160)
motion_mirroring = Vector2(448, 368)

[node name="Sprite2D" type="Sprite2D" parent="SkyBG/ParallaxLayer4"]
texture = ExtResource("10_eb2fp")

[node name="ParallaxLayer7" type="ParallaxLayer" parent="SkyBG"]
motion_scale = Vector2(0.05, 0.01)
motion_offset = Vector2(0, 40)
motion_mirroring = Vector2(640, 480)

[node name="Sprite2D" type="Sprite2D" parent="SkyBG/ParallaxLayer7"]
modulate = Color(1, 1, 1, 0.12549)
texture = ExtResource("6_3tv2d")

[node name="CityBG" type="ParallaxBackground" parent="."]
visible = false

[node name="ParallaxLayer" type="ParallaxLayer" parent="CityBG"]
modulate = Color(0.835294, 0.835294, 0.835294, 1)
motion_scale = Vector2(0.05, 0.05)
motion_mirroring = Vector2(640, 480)

[node name="Sprite2D" type="Sprite2D" parent="CityBG/ParallaxLayer"]
texture = ExtResource("11_6w7jm")

[node name="ParallaxLayer3" type="ParallaxLayer" parent="CityBG"]
visible = false
modulate = Color(0.760784, 0.760784, 0.760784, 1)
motion_scale = Vector2(0.1, 0.1)
motion_mirroring = Vector2(640, 480)

[node name="ColorRect" type="ColorRect" parent="CityBG/ParallaxLayer3"]
z_index = -5
z_as_relative = false
material = SubResource("ShaderMaterial_5m35t")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 640.0
offset_bottom = 480.0
grow_horizontal = 2
grow_vertical = 2

[node name="AbyssBG" type="ParallaxBackground" parent="."]
visible = false

[node name="Bg30" type="Sprite2D" parent="AbyssBG"]
texture = ExtResource("8_fhbtx")

[node name="ParallaxLayer" type="ParallaxLayer" parent="AbyssBG"]
modulate = Color(0.835294, 0.835294, 0.835294, 1)
motion_scale = Vector2(0.05, 0.05)
motion_mirroring = Vector2(640, 480)

[node name="Sprite2D" type="Sprite2D" parent="AbyssBG/ParallaxLayer"]
modulate = Color(0.380392, 0.380392, 0.380392, 1)
texture = ExtResource("9_ktfkt")

[node name="ParallaxLayer2" type="ParallaxLayer" parent="AbyssBG"]
modulate = Color(0.760784, 0.760784, 0.760784, 1)
motion_scale = Vector2(0.1, 0.1)
motion_mirroring = Vector2(640, 480)

[node name="Sprite2D" type="Sprite2D" parent="AbyssBG/ParallaxLayer2"]
modulate = Color(0.533333, 0.533333, 0.533333, 1)
texture = ExtResource("10_gyw7h")

[node name="ParallaxLayer3" type="ParallaxLayer" parent="AbyssBG"]
visible = false
modulate = Color(0.760784, 0.760784, 0.760784, 1)
motion_scale = Vector2(0.1, 0.1)
motion_mirroring = Vector2(640, 480)

[node name="ColorRect" type="ColorRect" parent="AbyssBG/ParallaxLayer3"]
z_index = -5
z_as_relative = false
material = SubResource("ShaderMaterial_5m35t")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 640.0
offset_bottom = 480.0
grow_horizontal = 2
grow_vertical = 2

[node name="SkyModulate" type="CanvasModulate" parent="."]
color = Color(0.752941, 0.658824, 0.52549, 1)

[node name="CityModulate" type="CanvasModulate" parent="."]
visible = false
color = Color(0.505882, 0.47451, 0.580392, 1)

[node name="AbyssModulate" type="CanvasModulate" parent="."]
visible = false
color = Color(0.227451, 0.258824, 0.298039, 1)

[node name="MusicBoss3" type="AudioStreamPlayer" parent="."]
stream = ExtResource("16_u4s3l")
bus = &"mus"

[node name="MusicAbyssCalm" type="AudioStreamPlayer" parent="."]
stream = ExtResource("17_4b642")
bus = &"mus"

[node name="MusicAbyssIntense" type="AudioStreamPlayer" parent="."]
stream = ExtResource("18_jg8vn")
bus = &"mus"

[node name="MusicCityCalm" type="AudioStreamPlayer" parent="."]
stream = ExtResource("19_vdfrj")
bus = &"mus"

[node name="MusicCityIntense" type="AudioStreamPlayer" parent="."]
stream = ExtResource("20_0pcfj")
bus = &"mus"
